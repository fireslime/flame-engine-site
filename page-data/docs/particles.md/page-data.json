{"componentChunkName":"component---src-templates-doc-template-js","path":"/docs/particles.md","result":{"data":{"markdownRemark":{"html":"<h1 id=\"particles\" style=\"position:relative;\"><a href=\"#particles\" aria-label=\"particles permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Particles</h1>\n<p>Flame offers a basic, yet robust and extendable particle system. The core concept of this system is the <code class=\"language-text\">Particle</code> class, which is very similar in its behavior to the <code class=\"language-text\">ParticleComponent</code>.</p>\n<p>The most basic usage of <code class=\"language-text\">Particle</code> with <code class=\"language-text\">BaseGame</code> would look as following:</p>\n<div class=\"gatsby-highlight\" data-language=\"dart\"><pre class=\"language-dart\"><code class=\"language-dart\"><span class=\"token keyword\">import</span> <span class=\"token string\">'package:flame/components/particle_component.dart'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// ... </span>\n\ngame<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>\n    <span class=\"token comment\">// Wrapping a [Particle] with [ParticleComponent]</span>\n    <span class=\"token comment\">// which maps [Component] lifecycle hooks to [Particle] ones</span>\n    <span class=\"token comment\">// and embeds a trigger for removing the component.</span>\n    <span class=\"token function\">ParticleComponent</span><span class=\"token punctuation\">(</span>\n        particle<span class=\"token punctuation\">:</span> <span class=\"token function\">CircleParticle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>When using <code class=\"language-text\">Particle</code> with custom <code class=\"language-text\">Game</code> implementation, please ensure that <code class=\"language-text\">Particle</code> <code class=\"language-text\">update</code> and <code class=\"language-text\">render</code> lifecycle hooks are called during each game loop frame.</p>\n<p>Main approaches to implement desired particle effects:</p>\n<ul>\n<li>Composition of existing behaviors</li>\n<li>Use behavior chaining (just a syntactic sugar of the first one)</li>\n<li>Using <code class=\"language-text\">ComputedParticle</code></li>\n</ul>\n<p>Composition works in a similar fashion to those of Flutter widgets by defining the effect from top to bottom. Chaining allows to express same composition trees more fluently by defining behaviors from bottom to top. Computed particles in their turn fully delegate implementation of the behavior to your code. Any of the approaches could be used in conjunction with existing behaviors where needed.</p>\n<p>Below you can find an example of a effect showing a burst of circles, accelerating from <code class=\"language-text\">(0, 0)</code> to a random directions using all three approaches defined above.</p>\n<div class=\"gatsby-highlight\" data-language=\"dart\"><pre class=\"language-dart\"><code class=\"language-dart\">Random rnd <span class=\"token operator\">=</span> <span class=\"token function\">Random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nFunction randomOffset <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token function\">Offset</span><span class=\"token punctuation\">(</span>\n    rnd<span class=\"token punctuation\">.</span><span class=\"token function\">nextDouble</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">200</span> <span class=\"token operator\">-</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> \n    rnd<span class=\"token punctuation\">.</span><span class=\"token function\">nextDouble</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">200</span> <span class=\"token operator\">-</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Composition</span>\n<span class=\"token comment\">// Defining particle effect as set of nested</span>\n<span class=\"token comment\">// behaviors from top to bottom, one within another: </span>\n<span class=\"token comment\">// ParticleComponent </span>\n<span class=\"token comment\">//   > ComposedParticle </span>\n<span class=\"token comment\">//     > AcceleratedParticle </span>\n<span class=\"token comment\">//       > CircleParticle</span>\ngame<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>\n    <span class=\"token function\">ParticleComponent</span><span class=\"token punctuation\">(</span>\n        particle<span class=\"token punctuation\">:</span> Particle<span class=\"token punctuation\">.</span><span class=\"token function\">generate</span><span class=\"token punctuation\">(</span>\n            count<span class=\"token punctuation\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n            generator<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token function\">AcceleratedParticle</span><span class=\"token punctuation\">(</span>\n                acceleration<span class=\"token punctuation\">:</span> <span class=\"token function\">randomOffset</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                child<span class=\"token punctuation\">:</span> <span class=\"token function\">CircleParticle</span><span class=\"token punctuation\">(</span>\n                    paint<span class=\"token punctuation\">:</span> <span class=\"token function\">Paint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> Colors<span class=\"token punctuation\">.</span>red\n                <span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>    \n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Chaining</span>\n<span class=\"token comment\">// Expresses same behavior as above, but with more fluent API.</span>\n<span class=\"token comment\">// Only [Particles] with [SingleChildParticle] mixin can be used as chainable behaviors.</span>\ngame<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>\n    Particle\n        <span class=\"token punctuation\">.</span><span class=\"token function\">generate</span><span class=\"token punctuation\">(</span>\n            count<span class=\"token punctuation\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n            generator<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token function\">CircleParticle</span><span class=\"token punctuation\">(</span>paint<span class=\"token punctuation\">:</span> <span class=\"token function\">Paint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> Colors<span class=\"token punctuation\">.</span>red<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">accelerating</span><span class=\"token punctuation\">(</span><span class=\"token function\">randomOffset</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">asComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Computed Particle</span>\n<span class=\"token comment\">// All the behavior is defined explicitly. Offers greater flexibility</span>\n<span class=\"token comment\">// compared to built-in behaviors.</span>\ngame<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>\n    Particle\n        <span class=\"token punctuation\">.</span><span class=\"token function\">generate</span><span class=\"token punctuation\">(</span>\n            count<span class=\"token punctuation\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n            generator<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">final</span> position <span class=\"token operator\">=</span> Offset<span class=\"token punctuation\">.</span>zero<span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">final</span> speed <span class=\"token operator\">=</span> Offset<span class=\"token punctuation\">.</span>zero<span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">final</span> acceleration <span class=\"token operator\">=</span> <span class=\"token function\">randomOffset</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">final</span> paint <span class=\"token operator\">=</span> <span class=\"token function\">Paint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> Colors<span class=\"token punctuation\">.</span>red<span class=\"token punctuation\">;</span>\n\n                <span class=\"token keyword\">return</span>  <span class=\"token function\">ComputedParticle</span><span class=\"token punctuation\">(</span>\n                    renderer<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>canvas<span class=\"token punctuation\">,</span> _<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                        speed <span class=\"token operator\">+=</span> acceleration<span class=\"token punctuation\">;</span>\n                        position <span class=\"token operator\">+=</span> speed<span class=\"token punctuation\">;</span>\n                        canvas<span class=\"token punctuation\">.</span><span class=\"token function\">drawCircle</span><span class=\"token punctuation\">(</span>position<span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> paint<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token punctuation\">}</span>\n                <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">asComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>You can find more examples of using different built-int particles in various combinations <a href=\"https://github.com/flame-engine/flame/blob/master/doc/examples/particles/lib/main.dart\">here</a>.</p>\n<h2 id=\"lifecycle\" style=\"position:relative;\"><a href=\"#lifecycle\" aria-label=\"lifecycle permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Lifecycle</h2>\n<p>Behavior common to all <code class=\"language-text\">Particle</code>s is that all of them accept a <code class=\"language-text\">lifespan</code> parameter. This value is used to make the <code class=\"language-text\">ParticleComponent</code> self-remove, once its internal <code class=\"language-text\">Particle</code> has reached the end of its life. Time within the <code class=\"language-text\">Particle</code> itself is tracked using the Flame <code class=\"language-text\">Timer</code>. It could be configured with a <code class=\"language-text\">double</code>, representing seconds (with microsecond precision) by passing it into the corresponding <code class=\"language-text\">Particle</code> constructor.</p>\n<div class=\"gatsby-highlight\" data-language=\"dart\"><pre class=\"language-dart\"><code class=\"language-dart\"><span class=\"token function\">Particle</span><span class=\"token punctuation\">(</span>lifespan<span class=\"token punctuation\">:</span> <span class=\"token number\">.2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// will live for 200ms</span>\n<span class=\"token function\">Particle</span><span class=\"token punctuation\">(</span>lifespan<span class=\"token punctuation\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// will live for 4s</span></code></pre></div>\n<p>It is also possible to reset <code class=\"language-text\">Particle</code> lifespan by using <code class=\"language-text\">setLifespan</code> method, which accepts a <code class=\"language-text\">double</code> of seconds. </p>\n<div class=\"gatsby-highlight\" data-language=\"dart\"><pre class=\"language-dart\"><code class=\"language-dart\"><span class=\"token keyword\">final</span> particle <span class=\"token operator\">=</span> <span class=\"token function\">Particle</span><span class=\"token punctuation\">(</span>lifespan<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// ... at some point of time later</span>\nparticle<span class=\"token punctuation\">.</span><span class=\"token function\">setLifespan</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// will live for another 2s from this moment</span></code></pre></div>\n<p>During its lifetime, <code class=\"language-text\">Particle</code> tracks the time it was alive and exposes it with a <code class=\"language-text\">progress</code> getter, which is spanning between 0.0 to 1.0. Its value could be used in a similar fashion as <code class=\"language-text\">value</code> of <code class=\"language-text\">AnimationController</code> in Flutter.</p>\n<div class=\"gatsby-highlight\" data-language=\"dart\"><pre class=\"language-dart\"><code class=\"language-dart\"><span class=\"token keyword\">final</span> duration <span class=\"token operator\">=</span> <span class=\"token keyword\">const</span> <span class=\"token function\">Duration</span><span class=\"token punctuation\">(</span>seconds<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">final</span> particle <span class=\"token operator\">=</span> <span class=\"token function\">Particle</span><span class=\"token punctuation\">(</span>lifespan<span class=\"token punctuation\">:</span> duration<span class=\"token punctuation\">.</span>inMicroseconds <span class=\"token operator\">/</span> Durations<span class=\"token punctuation\">.</span>microsecondsPerSecond<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ngame<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token function\">ParticleComponent</span><span class=\"token punctuation\">(</span>particle<span class=\"token punctuation\">:</span> particle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Will print values from 0 to 1 with step of .1: 0, 0.1, 0.2 ... 0.9, 1.0</span>\nTimer<span class=\"token punctuation\">.</span><span class=\"token function\">periodic</span><span class=\"token punctuation\">(</span>duration <span class=\"token operator\">*</span> <span class=\"token number\">.1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token function\">print</span><span class=\"token punctuation\">(</span>particle<span class=\"token punctuation\">.</span>progress<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>The lifespan is passed down to all the descendants of a given <code class=\"language-text\">Particle</code>, if it supports any of the nesting behaviors.</p>\n<h2 id=\"built-in-particles\" style=\"position:relative;\"><a href=\"#built-in-particles\" aria-label=\"built in particles permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Built-in particles</h2>\n<p>Flame ships with a few built-in <code class=\"language-text\">Particle</code> behaviors:</p>\n<ul>\n<li>The <code class=\"language-text\">TranslatedParticle</code>, translates its <code class=\"language-text\">child</code> by given <code class=\"language-text\">Offset</code></li>\n<li>The <code class=\"language-text\">MovingParticle</code>, moves its <code class=\"language-text\">child</code> between two predefined <code class=\"language-text\">Offset</code>, supports <code class=\"language-text\">Curve</code></li>\n<li>The <code class=\"language-text\">AcceleratedParticle</code>, allows basic physics based effects, like gravitation or speed dampening</li>\n<li>The <code class=\"language-text\">CircleParticle</code>, renders circles of all shapes and sizes</li>\n<li>The <code class=\"language-text\">SpriteParticle</code>, renders Flame <code class=\"language-text\">Sprite</code> within a <code class=\"language-text\">Particle</code> effect</li>\n<li>The <code class=\"language-text\">ImageParticle</code>, renders <em>dart:ui</em> <code class=\"language-text\">Image</code> within a <code class=\"language-text\">Particle</code> effect</li>\n<li>The <code class=\"language-text\">ComponentParticle</code>, renders Flame <code class=\"language-text\">Component</code> within a <code class=\"language-text\">Particle</code> effect</li>\n<li>The <code class=\"language-text\">FlareParticle</code>, renders Flare animation within a <code class=\"language-text\">Particle</code> effect</li>\n</ul>\n<p>More examples of using these behaviors together are available <a href=\"https://github.com/flame-engine/flame/blob/master/doc/examples/particles/lib/main.dart\">here</a>. All the implementations are available in <a href=\"https://github.com/flame-engine/flame/blob/master/lib/particles\">particles</a> folder in the Flame source.</p>\n<h2 id=\"translated-particle\" style=\"position:relative;\"><a href=\"#translated-particle\" aria-label=\"translated particle permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Translated Particle</h2>\n<p>Simply translates underlying <code class=\"language-text\">Particle</code> to a specified <code class=\"language-text\">Offset</code> within the rendering <code class=\"language-text\">Canvas</code>.\nDoes not change or alter its position, consider using <code class=\"language-text\">MovingParticle</code> or <code class=\"language-text\">AcceleratedParticle</code> where change of position is required.\nSame effect could be achieved by translating the <code class=\"language-text\">Canvas</code> layer.</p>\n<div class=\"gatsby-highlight\" data-language=\"dart\"><pre class=\"language-dart\"><code class=\"language-dart\">game<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>\n    <span class=\"token function\">ParticleComponent</span><span class=\"token punctuation\">(</span>\n        particle<span class=\"token punctuation\">:</span> <span class=\"token function\">TranslatedParticle</span><span class=\"token punctuation\">(</span>\n            <span class=\"token comment\">// Will translate child Particle effect to</span>\n            <span class=\"token comment\">// the center of game canvas</span>\n            offset<span class=\"token punctuation\">:</span> game<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">.</span><span class=\"token function\">center</span><span class=\"token punctuation\">(</span>Offset<span class=\"token punctuation\">.</span>zero<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            child<span class=\"token punctuation\">:</span> <span class=\"token function\">Particle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"moving-particle\" style=\"position:relative;\"><a href=\"#moving-particle\" aria-label=\"moving particle permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Moving Particle</h2>\n<p>Moves child <code class=\"language-text\">Particle</code> between <code class=\"language-text\">from</code> and <code class=\"language-text\">to</code> <code class=\"language-text\">Offset</code>s during its lifespan. Supports <code class=\"language-text\">Curve</code> via <code class=\"language-text\">CurvedParticle</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"dart\"><pre class=\"language-dart\"><code class=\"language-dart\">game<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>\n    <span class=\"token function\">ParticleComponent</span><span class=\"token punctuation\">(</span>\n        particle<span class=\"token punctuation\">:</span> <span class=\"token function\">MovingParticle</span><span class=\"token punctuation\">(</span>\n            <span class=\"token comment\">// Will move from corner to corner of the</span>\n            <span class=\"token comment\">// game canvas</span>\n            from<span class=\"token punctuation\">:</span> game<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">.</span><span class=\"token function\">topLeft</span><span class=\"token punctuation\">(</span>Offset<span class=\"token punctuation\">.</span>zero<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            to<span class=\"token punctuation\">:</span> game<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">.</span><span class=\"token function\">bottomRight</span><span class=\"token punctuation\">(</span>Offset<span class=\"token punctuation\">.</span>zero<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            child<span class=\"token punctuation\">:</span> <span class=\"token function\">Particle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"accelerated-particle\" style=\"position:relative;\"><a href=\"#accelerated-particle\" aria-label=\"accelerated particle permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Accelerated Particle</h2>\n<p>A basic physics particle which allows you to specify its initial <code class=\"language-text\">position</code>, <code class=\"language-text\">speed</code> and <code class=\"language-text\">acceleration</code> and let the <code class=\"language-text\">update</code> cycle do the rest. All three are specified as <code class=\"language-text\">Offset</code>s,\nwhich you can think of as vectors. It works especially well for physics-based \"bursts\", but it is not limited to that.\nUnit of the <code class=\"language-text\">Offset</code> value is <em>logical px/s</em>. So a speed of <code class=\"language-text\">Offset(0, 100)</code> will move a child <code class=\"language-text\">Particle</code> by 100 logical pixels of the device every second of game time.</p>\n<div class=\"gatsby-highlight\" data-language=\"dart\"><pre class=\"language-dart\"><code class=\"language-dart\"><span class=\"token keyword\">final</span> rnd <span class=\"token operator\">=</span> <span class=\"token function\">Random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ngame<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>\n    <span class=\"token function\">ParticleComponent</span><span class=\"token punctuation\">(</span>\n        particle<span class=\"token punctuation\">:</span> <span class=\"token function\">AcceleratedParticle</span><span class=\"token punctuation\">(</span>\n            <span class=\"token comment\">// Will fire off in the center of game canvas</span>\n            position<span class=\"token punctuation\">:</span> game<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">.</span><span class=\"token function\">center</span><span class=\"token punctuation\">(</span>Offset<span class=\"token punctuation\">.</span>zero<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token comment\">// With random initial speed of Offset(-100..100, 0..-100)</span>\n            speed<span class=\"token punctuation\">:</span> <span class=\"token function\">Offset</span><span class=\"token punctuation\">(</span>rnd<span class=\"token punctuation\">.</span><span class=\"token function\">nextDouble</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">200</span> <span class=\"token operator\">-</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span>rnd<span class=\"token punctuation\">.</span><span class=\"token function\">nextDouble</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token comment\">// Accelerating downwards, simulating \"gravity\"</span>\n            speed<span class=\"token punctuation\">:</span> <span class=\"token function\">Offset</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            child<span class=\"token punctuation\">:</span> <span class=\"token function\">Particle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"circle-particle\" style=\"position:relative;\"><a href=\"#circle-particle\" aria-label=\"circle particle permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Circle Particle</h2>\n<p>A <code class=\"language-text\">Particle</code> which renders circle with given <code class=\"language-text\">Paint</code> at the zero offset of passed <code class=\"language-text\">Canvas</code>. Use in conjunction with <code class=\"language-text\">TranslatedParticle</code>, <code class=\"language-text\">MovingParticle</code> or <code class=\"language-text\">AcceleratedParticle</code>\nin order to achieve desired positioning.</p>\n<div class=\"gatsby-highlight\" data-language=\"dart\"><pre class=\"language-dart\"><code class=\"language-dart\">game<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>\n    <span class=\"token function\">ParticleComponent</span><span class=\"token punctuation\">(</span>\n        particle<span class=\"token punctuation\">:</span> <span class=\"token function\">CircleParticle</span><span class=\"token punctuation\">(</span>\n            radius<span class=\"token punctuation\">:</span> game<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">.</span>width <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n            paint<span class=\"token punctuation\">:</span> <span class=\"token function\">Paint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> Colors<span class=\"token punctuation\">.</span>red<span class=\"token punctuation\">.</span><span class=\"token function\">withOpacity</span><span class=\"token punctuation\">(</span><span class=\"token number\">.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"sprite-particle\" style=\"position:relative;\"><a href=\"#sprite-particle\" aria-label=\"sprite particle permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Sprite Particle</h2>\n<p>Allows you to embed Flame's <code class=\"language-text\">Sprite</code> into your particle effects. Useful when consuming graphics for the effect from <code class=\"language-text\">SpriteSheet</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"dart\"><pre class=\"language-dart\"><code class=\"language-dart\">game<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>\n    <span class=\"token function\">ParticleComponent</span><span class=\"token punctuation\">(</span>\n        particle<span class=\"token punctuation\">:</span> <span class=\"token function\">SpriteParticle</span><span class=\"token punctuation\">(</span>\n          sprite<span class=\"token punctuation\">:</span> <span class=\"token function\">Sprite</span><span class=\"token punctuation\">(</span><span class=\"token string\">'sprite.png'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n          size<span class=\"token punctuation\">:</span> <span class=\"token function\">Vector2</span><span class=\"token punctuation\">(</span><span class=\"token number\">64</span><span class=\"token punctuation\">,</span> <span class=\"token number\">64</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"image-particle\" style=\"position:relative;\"><a href=\"#image-particle\" aria-label=\"image particle permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Image Particle</h2>\n<p>Renders given <code class=\"language-text\">dart:ui</code> image within the particle tree. </p>\n<div class=\"gatsby-highlight\" data-language=\"dart\"><pre class=\"language-dart\"><code class=\"language-dart\"><span class=\"token comment\">// During game initialisation</span>\n<span class=\"token keyword\">await</span> Flame<span class=\"token punctuation\">.</span>images<span class=\"token punctuation\">.</span><span class=\"token function\">loadAll</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">'image.png'</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// ...</span>\n\n<span class=\"token comment\">// Somewhere during the game loop</span>\ngame<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>\n    <span class=\"token function\">ParticleComponent</span><span class=\"token punctuation\">(</span>\n        particle<span class=\"token punctuation\">:</span> <span class=\"token function\">ImageParticle</span><span class=\"token punctuation\">(</span>\n          size<span class=\"token punctuation\">:</span> <span class=\"token keyword\">const</span> Size<span class=\"token punctuation\">.</span><span class=\"token function\">square</span><span class=\"token punctuation\">(</span><span class=\"token number\">24</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n          image<span class=\"token punctuation\">:</span> Flame<span class=\"token punctuation\">.</span>images<span class=\"token punctuation\">.</span>loadedFiles<span class=\"token punctuation\">[</span><span class=\"token string\">'image.png'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"animation-particle\" style=\"position:relative;\"><a href=\"#animation-particle\" aria-label=\"animation particle permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Animation Particle</h2>\n<p>A <code class=\"language-text\">Particle</code> which embeds a Flame <code class=\"language-text\">Animation</code>. By default, aligns <code class=\"language-text\">Animation</code>s <code class=\"language-text\">stepTime</code> so that it's fully played during the <code class=\"language-text\">Particle</code> lifespan. It's possible to override this behavior with <code class=\"language-text\">alignAnimationTime</code> parameter.</p>\n<div class=\"gatsby-highlight\" data-language=\"dart\"><pre class=\"language-dart\"><code class=\"language-dart\"><span class=\"token keyword\">final</span> spritesheet <span class=\"token operator\">=</span> <span class=\"token function\">SpriteSheet</span><span class=\"token punctuation\">(</span>\n  imageName<span class=\"token punctuation\">:</span> <span class=\"token string\">'spritesheet.png'</span><span class=\"token punctuation\">,</span>\n  srcSize<span class=\"token punctuation\">:</span> Vector2<span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span><span class=\"token number\">16.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ngame<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>\n    <span class=\"token function\">ParticleComponent</span><span class=\"token punctuation\">(</span>\n        particle<span class=\"token punctuation\">:</span> <span class=\"token function\">AnimationParticle</span><span class=\"token punctuation\">(</span>\n          animation<span class=\"token punctuation\">:</span> spritesheet<span class=\"token punctuation\">.</span><span class=\"token function\">createAnimation</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> stepTime<span class=\"token punctuation\">:</span> <span class=\"token number\">0.1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"component-particle\" style=\"position:relative;\"><a href=\"#component-particle\" aria-label=\"component particle permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Component Particle</h2>\n<p>This <code class=\"language-text\">Particle</code> allows you to embed a Flame <code class=\"language-text\">Component</code> within the particle effects. The <code class=\"language-text\">Component</code> could have its own <code class=\"language-text\">update</code> lifecycle and\ncould be reused across different effect trees. If the only thing you need is to add some dynamics to an instance of a certain <code class=\"language-text\">Component</code>,\nplease consider adding it to the <code class=\"language-text\">game</code> directly, without the <code class=\"language-text\">Particle</code> in the middle.</p>\n<div class=\"gatsby-highlight\" data-language=\"dart\"><pre class=\"language-dart\"><code class=\"language-dart\"><span class=\"token keyword\">var</span> longLivingRect <span class=\"token operator\">=</span> <span class=\"token function\">RectComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ngame<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>\n    <span class=\"token function\">ParticleComponent</span><span class=\"token punctuation\">(</span>\n        particle<span class=\"token punctuation\">:</span> <span class=\"token function\">ComponentParticle</span><span class=\"token punctuation\">(</span>\n          component<span class=\"token punctuation\">:</span> longLivingRect\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">RectComponent</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">render</span><span class=\"token punctuation\">(</span>Canvas c<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        c<span class=\"token punctuation\">.</span><span class=\"token function\">drawRect</span><span class=\"token punctuation\">(</span>\n            Rect<span class=\"token punctuation\">.</span><span class=\"token function\">fromCenter</span><span class=\"token punctuation\">(</span>center<span class=\"token punctuation\">:</span> Offset<span class=\"token punctuation\">.</span>zero<span class=\"token punctuation\">,</span> width<span class=\"token punctuation\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> \n            <span class=\"token function\">Paint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> Colors<span class=\"token punctuation\">.</span>red\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">void</span> <span class=\"token function\">update</span><span class=\"token punctuation\">(</span>double dt<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">/// Will be called by parent [Particle]</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"flare-particle\" style=\"position:relative;\"><a href=\"#flare-particle\" aria-label=\"flare particle permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Flare Particle</h2>\n<p>To use Flare within Flame, use the <a href=\"https://github.com/flame-engine/flame_flare\"><code class=\"language-text\">flame_flare</code></a> package.</p>\n<p>It will provide a class <code class=\"language-text\">FlareParticle</code> that is a container for <code class=\"language-text\">FlareActorAnimation</code>, it propagates <code class=\"language-text\">update</code> and <code class=\"language-text\">render</code> hooks to its child.</p>\n<div class=\"gatsby-highlight\" data-language=\"dart\"><pre class=\"language-dart\"><code class=\"language-dart\"><span class=\"token keyword\">import</span> <span class=\"token string\">'package:flame_flare/flame_flare.dart'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// During game initialisation</span>\n<span class=\"token keyword\">const</span> flareSize <span class=\"token operator\">=</span> <span class=\"token number\">32.0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">final</span> flareAnimation <span class=\"token operator\">=</span> <span class=\"token function\">FlareActorAnimation</span><span class=\"token punctuation\">(</span><span class=\"token string\">'assets/sparkle.flr'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nflareAnimation<span class=\"token punctuation\">.</span>width <span class=\"token operator\">=</span> flareSize<span class=\"token punctuation\">;</span> \nflareAnimation<span class=\"token punctuation\">.</span>height <span class=\"token operator\">=</span> flareSize<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Somewhere in game</span>\ngame<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>\n    <span class=\"token function\">ParticleComponent</span><span class=\"token punctuation\">(</span>\n        particle<span class=\"token punctuation\">:</span> <span class=\"token function\">FlareParticle</span><span class=\"token punctuation\">(</span>flare<span class=\"token punctuation\">:</span> flareAnimation<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"computed-particle\" style=\"position:relative;\"><a href=\"#computed-particle\" aria-label=\"computed particle permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Computed Particle</h2>\n<p>A <code class=\"language-text\">Particle</code> which could help you when:</p>\n<ul>\n<li>Default behavior is not enough</li>\n<li>Complex effects optimization</li>\n<li>Custom easings</li>\n</ul>\n<p>When created, delegates all the rendering to a supplied <code class=\"language-text\">ParticleRenderDelegate</code> which is called on each frame\nto perform necessary computations and render something to the <code class=\"language-text\">Canvas</code></p>\n<div class=\"gatsby-highlight\" data-language=\"dart\"><pre class=\"language-dart\"><code class=\"language-dart\">game<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>\n    <span class=\"token function\">ParticleComponent</span><span class=\"token punctuation\">(</span>\n        <span class=\"token comment\">// Renders a circle which gradually</span>\n        <span class=\"token comment\">// changes its color and size during the particle lifespan</span>\n        particle<span class=\"token punctuation\">:</span> <span class=\"token function\">ComputedParticle</span><span class=\"token punctuation\">(</span>\n            renderer<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>canvas<span class=\"token punctuation\">,</span> particle<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> canvas<span class=\"token punctuation\">.</span><span class=\"token function\">drawCircle</span><span class=\"token punctuation\">(</span>\n                Offset<span class=\"token punctuation\">.</span>zero<span class=\"token punctuation\">,</span>\n                particle<span class=\"token punctuation\">.</span>progress <span class=\"token operator\">*</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n                <span class=\"token function\">Paint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                  <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> Color<span class=\"token punctuation\">.</span><span class=\"token function\">lerp</span><span class=\"token punctuation\">(</span>\n                    Colors<span class=\"token punctuation\">.</span>red<span class=\"token punctuation\">,</span>\n                    Colors<span class=\"token punctuation\">.</span>blue<span class=\"token punctuation\">,</span>\n                    particle<span class=\"token punctuation\">.</span>progress<span class=\"token punctuation\">,</span>\n                  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"nesting-behavior\" style=\"position:relative;\"><a href=\"#nesting-behavior\" aria-label=\"nesting behavior permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Nesting behavior</h2>\n<p>Flame's implementation of particles follows same pattern of extreme composition as Flutter widgets. That\nis achieved by encapsulating small pieces of behavior in every of particles and then nesting these behaviors together to achieve desired visual effect.</p>\n<p>Two entities allowing <code class=\"language-text\">Particle</code> to nest each other are: <code class=\"language-text\">SingleChildParticle</code> mixin and <code class=\"language-text\">ComposedParticle</code> class.</p>\n<p><code class=\"language-text\">SingleChildParticle</code> may help you with creating <code class=\"language-text\">Particles</code> with a custom behavior.\nFor example, randomly positioning it's child during each frame:</p>\n<div class=\"gatsby-highlight\" data-language=\"dart\"><pre class=\"language-dart\"><code class=\"language-dart\"><span class=\"token keyword\">var</span> rnd <span class=\"token operator\">=</span> <span class=\"token function\">Random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">GlitchParticle</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Particle</span> <span class=\"token keyword\">with</span> SingleChildParticle <span class=\"token punctuation\">{</span>\n    <span class=\"token metadata symbol\">@override</span>\n    Particle child<span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">GlitchParticle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token metadata symbol\">@required</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>child<span class=\"token punctuation\">,</span>\n      double lifespan<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>lifespan<span class=\"token punctuation\">:</span> lifespan<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token metadata symbol\">@override</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span>Canvas canvas<span class=\"token punctuation\">)</span>  <span class=\"token punctuation\">{</span>\n        canvas<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        canvas<span class=\"token punctuation\">.</span><span class=\"token function\">translate</span><span class=\"token punctuation\">(</span>rnd<span class=\"token punctuation\">.</span><span class=\"token function\">nextDouble</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> rnd<span class=\"token punctuation\">.</span><span class=\"token function\">nextDouble</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// Will also render the child</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        canvas<span class=\"token punctuation\">.</span><span class=\"token function\">restore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">ComposedParticle</code> could be used either as standalone or within existing <code class=\"language-text\">Particle</code> tree. </p>","frontmatter":{"path":"/docs/particles.md","title":"Particles"}}},"pageContext":{}},"staticQueryHashes":["3000541721","3000541721","3595947586"]}